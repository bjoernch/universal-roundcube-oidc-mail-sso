<?php

// OIDC
$config['universal_oidc_mail_sso_issuer'] = getenv('OIDC_ISSUER') ?: 'https://oidc.example.com';
$config['universal_oidc_mail_sso_client_id'] = getenv('OIDC_CLIENT_ID') ?: '';
$config['universal_oidc_mail_sso_client_secret'] = getenv('OIDC_CLIENT_SECRET') ?: '';
$config['universal_oidc_mail_sso_redirect_uri'] = getenv('OIDC_REDIRECT_URI') ?: null;
$config['universal_oidc_mail_sso_post_logout_redirect_uri'] = getenv('OIDC_POST_LOGOUT_REDIRECT_URI') ?: null;
$config['universal_oidc_mail_sso_allowed_issuers'] = getenv('ALLOWED_ISSUERS') ?: '';
$config['universal_oidc_mail_sso_metadata_pin_sha256'] = getenv('METADATA_PIN_SHA256') ?: '';
$config['universal_oidc_mail_sso_scopes'] = getenv('OIDC_SCOPES') ?: 'openid email profile groups';
$config['universal_oidc_mail_sso_allowed_email_domain'] = getenv('ALLOWED_EMAIL_DOMAIN') ?: '';
$config['universal_oidc_mail_sso_allow_custom_mailbox_email'] = getenv('ALLOW_CUSTOM_MAILBOX_EMAIL') ?: false;

// Security / behavior
$config['universal_oidc_mail_sso_mailbox_key'] = getenv('RCUBE_MAILBOX_KEY') ?: '';
$config['universal_oidc_mail_sso_force_https'] = getenv('FORCE_HTTPS') ?: true;
$config['universal_oidc_mail_sso_disable_password_login'] = getenv('DISABLE_PASSWORD_LOGIN') ?: true;
$config['universal_oidc_mail_sso_login_mode'] = getenv('LOGIN_MODE') ?: 'auto';
$config['universal_oidc_mail_sso_hide_standard_login_form'] = getenv('HIDE_STANDARD_LOGIN_FORM') ?: true;
$config['universal_oidc_mail_sso_login_button_text'] = getenv('LOGIN_BUTTON_TEXT') ?: 'Login with SSO';
$config['universal_oidc_mail_sso_client_side_wrap_enabled'] = getenv('CLIENT_SIDE_WRAP_ENABLED') ?: false;
$config['universal_oidc_mail_sso_session_idle_timeout_sec'] = getenv('SESSION_IDLE_TIMEOUT_SEC') ?: 1800;
$config['universal_oidc_mail_sso_session_absolute_timeout_sec'] = getenv('SESSION_ABSOLUTE_TIMEOUT_SEC') ?: 43200;
$config['universal_oidc_mail_sso_login_rate_limit_per_5m'] = getenv('LOGIN_RATE_LIMIT_PER_5M') ?: 20;
$config['universal_oidc_mail_sso_callback_rate_limit_per_5m'] = getenv('CALLBACK_RATE_LIMIT_PER_5M') ?: 30;
$config['universal_oidc_mail_sso_setup_rate_limit_per_5m'] = getenv('SETUP_RATE_LIMIT_PER_5M') ?: 8;
$config['universal_oidc_mail_sso_auth_lock_seconds'] = getenv('AUTH_LOCK_SECONDS') ?: 600;

// Generic mail server defaults
$config['universal_oidc_mail_sso_default_imap_host'] = getenv('DEFAULT_IMAP_HOST') ?: 'imap.example.com';
$config['universal_oidc_mail_sso_default_imap_port'] = getenv('DEFAULT_IMAP_PORT') ?: 993;
$config['universal_oidc_mail_sso_default_imap_security'] = getenv('DEFAULT_IMAP_SECURITY') ?: 'ssl';
$config['universal_oidc_mail_sso_default_smtp_host'] = getenv('DEFAULT_SMTP_HOST') ?: 'smtp.example.com';
$config['universal_oidc_mail_sso_default_smtp_port'] = getenv('DEFAULT_SMTP_PORT') ?: 587;
$config['universal_oidc_mail_sso_default_smtp_security'] = getenv('DEFAULT_SMTP_SECURITY') ?: 'tls';
$config['universal_oidc_mail_sso_default_smtp_auth'] = getenv('DEFAULT_SMTP_AUTH') ?: 1;
$config['universal_oidc_mail_sso_admin_group_name'] = getenv('ADMIN_GROUP_NAME') ?: 'webmail_admin';
$config['universal_oidc_mail_sso_user_group_name'] = getenv('USER_GROUP_NAME') ?: 'webmail';
$config['universal_oidc_mail_sso_admin_emails'] = getenv('ADMIN_EMAILS') ?: '';
